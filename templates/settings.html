{% extends "base.html" %}

{% block content %}
<h1>Paramètres</h1>

<h2>Configuration Email</h2>
<div class="settings-section">
    <table class="settings-table">
        <tr>
            <th>Paramètre</th>
            <th>Valeur</th>
        </tr>
        <tr>
            <td>Notifications email activées</td>
            <td>{{ 'Oui' if email_config.get('enabled', False) else 'Non' }}</td>
        </tr>
        <tr>
            <td>Fréquence des rappels</td>
            <td>Tous les {{ email_config.get('reminder_frequency_months', '?') }} mois</td>
        </tr>
        <tr>
            <td>Serveur SMTP</td>
            <td>{{ email_config.get('smtp_server', 'N/A') }}</td>
        </tr>
        <tr>
            <td>Port SMTP</td>
            <td>{{ email_config.get('smtp_port', 'N/A') }}</td>
        </tr>
        <tr>
            <td>Utiliser TLS</td>
            <td>{{ 'Oui' if email_config.get('use_tls', False) else 'Non' }}</td>
        </tr>
        <tr>
            <td>Adresse d’expéditeur (aperçu)</td>
            <td>{{ email_config.get('sender_email', 'N/A') }}</td>
        </tr>
        <tr>
            <td>Nom de l’expéditeur</td>
            <td>{{ email_config.get('sender_name', 'N/A') }}</td>
        </tr>
    </table>
    
    <div class="settings-note">
        <p><strong>Important:</strong></p>
        <ul>
            <li>Envoi réel: l'adresse d'expéditeur sera <em>l'identifiant saisi</em> au moment de l'envoi.</li>
            <li>Les identifiants ne sont <em>jamais stockés</em> (demandés à chaque envoi).</li>
            <li>Le champ « Sender Email » ci-dessus sert uniquement de valeur par défaut pour les aperçus (dry run).</li>
            <li>Serveur attendu: <code>mail.univ-lr.fr</code> sur port <code>587</code> avec <code>TLS</code>.</li>
        </ul>
    </div>
</div>

<h2>Configuration des rapports</h2>
<div class="settings-section">
    <table class="settings-table">
        <tr>
            <th>Paramètre</th>
            <th>Valeur</th>
        </tr>
        <tr>
            <td>Générer un PDF</td>
            <td>{{ 'Oui' if report_config.get('generate_pdf', False) else 'Non' }}</td>
        </tr>
        <tr>
            <td>Inclure la dernière vérification</td>
            <td>{{ 'Oui' if report_config.get('include_last_verified', False) else 'Non' }}</td>
        </tr>
        <tr>
            <td>Afficher uniquement les éléments critiques</td>
            <td>{{ 'Oui' if report_config.get('include_critical_only', False) else 'Non' }}</td>
        </tr>
        <tr>
            <td>Format</td>
            <td>{{ report_config.get('format', 'N/A') }}</td>
        </tr>
    </table>
</div>

<h2>Informations système</h2>
<div class="settings-section">
    <p>
        <strong>Fichier de configuration :</strong> config/teaching_software.yml<br>
        <strong>Application web :</strong> Flask<br>
        <strong>Dernière mise à jour :</strong> 2025-01-01
    </p>
</div>
{% endblock %}
